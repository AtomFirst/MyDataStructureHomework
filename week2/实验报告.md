# 数据结构上机实验报告

> 要求代码和实验报告规范，在算法思想中：对实验涉及的数据结构进行有效设计和分析；对算法进行分析并给出时间、空间复杂度的结论；清晰表达实验思路、出现的问题及解决方法。

## 一、调试成功程序及说明

### 1.实现线性表冒泡排序

算法思想：

对一个长为 $n$ 的线性表 $a_1,a_2,...,a_n$ ，依次遍历 $i=1,2,...,n-1$ ，如果 $a_i>a_{i+1} $ ，交换 $a_i,a_{i+1}$ ，则 $max\{a_i\}$ 会被交换到第 $i$ 位，形如冒泡。

依次遍历 $j=n,n-1,...,2$ ，对 $a_1,a_2,...,a_j$ 进行上述操作，完成后 $a_1 \leq a_2 \leq ... \leq a_n$ 。

冒泡排序的时间复杂度是 $O(n^2)$ ， 空间复杂度是 $O(1)$ 。

通过双向迭代器，可以给出统一的实现。

```cpp
template<typename T>
void BubbleSort(T &list){
    for(auto i=list.end();i!=list.begin();--i)
        for(auto j=list.begin(),k=++(list.begin());k!=i;++j,++k)
            if(*j>*k)
                swap(*j,*k);
}
```

运行结果：

`SquList` 和 `LinkList` 的实现在 [ADTList.cpp](./ADTList.cpp) 文件中，测试程序在 [p1.cpp](./p1.cpp) 中，测试数据在 [input/in1.txt](./input/in1.txt) 中。

请运行 `test.sh` 脚本获得各程序运行结果，即在命令行输入

```bash
chmod +x test.sh && ./test.sh
```

结果分析：符合预期。

（下面的程序运行结果和结果分析与第一题类似，不再重复）

### 2.实现有序集合求并（原地）

算法思想：



```cpp
template<typename T>
void Union(T &a,T &b){
    auto j=b.begin();
    for(auto i=a.begin();i!=a.end();++i)
        for(;j!=b.end() and *i<=*j;++j)
            if(*i<*j)
                i=a.insert(i,*j);
    for(;j!=b.end();++j)
        a.insert(a.end(),*j);
}
```

### 3.实现线性表删除无序元素

算法思想：

迭代器 `i` 按顺序遍历各元素，对于每个元素，令迭代器 `j` 遍历其后元素，值相同则删除。使用了两重循环，时间复杂度 $O(n^2)$ ，时间复杂度 $O(1)$ 。
```cpp
// 顺序表实现
template<typename T>
void unique(T *list){
    for(auto i=list->begin();i!=list->end();++i){
        auto j=i; ++j;
        while(j!=list->end()){
            //cerr<<(*i)<<" cmp "<<(*j)<<endl;
            if(*i==*j)
                j=list->erase(j);
            else
                ++j;
        }
    }
}
```

### 4.CSP题目：红绿灯

算法思想：

模拟。使用 `time` 记录到达某状态的时间，通过 `time` 和信号灯的初始状态易得信号灯现在的状态，并更新 `time` 。

```cpp
void solve(){
    int g,y,r,n; cin>>r>>y>>g>>n;
    int c=g+y+r;
    ll time=0;
    // green -> yellow -> red
    for(int i=1;i<=n;i++){
        int k,t; cin>>k>>t;
        if(k==0) time+=t;
        else{
            int x;
            if(k==1) x=g+y+r;
            else if(k==2) x=g+y;
            else if(k==3) x=g;
            int lt=(x-t+time)%c;
            if(lt<=g);
            else time+=c-lt;
        }
        //cerr<<"time="<<time<<' ';
    }
    cout<<time<<'\n';
}
```

### 5.CSP题目：跳一跳

算法思想：

模拟。根据输入依次更新答案 `res` 。

```cpp
void solve(){
    int res=0,lst=1;
    for(int x;cin>>x and x;res+=lst)
        if(x==1)
            lst=1;
        else{
            if(lst==1) lst=2;
            else lst+=2;
        }
    cout<<res<<'\n';
}
```

## 二、未调试成功程序及说明

无